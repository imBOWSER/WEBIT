import{z as n,e as _,s as z,a as w,b as f,c as C,d as D}from"./fetch-post-BHrvurFS.js";import"./index-DJKlbE3A.js";import{A as S,H as j,C as V,o as m,c as G,x as i,E as o,b as t,D as u,F as R,q as p,G as g,u as v,a as y}from"./index-Dw301Ny5.js";import"./index-DGEOgZpe.js";const h={class:"flex justify-center absolute top-1/2 left-1/2 mr-[-%50] -translate-x-1/2 -translate-y-1/2"},B={class:"w-[400px] h-auto bg-surface-800 rounded-md"},N={class:"flex justify-center flex-row"},F={class:"p-4"},T={class:"mb-4"},U={class:"mb-4"},E={class:"mb-4"},J=S({__name:"ClientLegacyRegisterView",setup(L){const c=j(),P=n.object({growId:n.string().min(5,{message:"GrowID must be at least 5 characters."}).max(20,{message:"GrowID is too long."}).refine(l=>!/[!@#$%^&*(),.?":{}|<> ]/.test(l),{message:"GrowID contains special characters."}),password:n.string().min(5,{message:"Password must contain at least 5 characters."}),confirmPassword:n.string().min(5,{message:"Password must contain at least 5 characters."})}).refine(l=>l.password===l.confirmPassword,{message:"Passwords must match!",path:["confirmPassword"]}),r=V({growId:"",password:"",confirmPassword:""}),k=V(D(P)),I=async l=>{if(l.valid){const[s,a]=await _(r.value);if(a!==null){c.add({severity:"error",summary:a,life:2e3});return}else{const d=s==null?void 0:s.token;c.add({severity:"success",summary:"Successfully registered new account!",life:2e3}),c.add({severity:"info",summary:"Redirecting to growtopia shortly...",life:3e3}),setTimeout(()=>{window.location.href=`/player/growid/login/validate?token=${d}`},3e3)}}};return(l,s)=>(m(),G(R,null,[i(o(z)),t("div",h,[t("div",B,[s[7]||(s[7]=t("div",{class:"text-center mt-8 mb-4"},[t("div",{class:"font-bold text-2xl"},"Legacy Register")],-1)),t("div",N,[i(o(C),{resolver:k.value,initialValues:r.value,onSubmit:I,class:"w-full px-8"},{default:u(a=>{var d,b,x;return[t("div",F,[t("div",T,[s[3]||(s[3]=t("label",{for:"growId",class:"block text-sm font-medium text-surface-200"}," GrowID ",-1)),i(o(w),{id:"growId",name:"growId",modelValue:r.value.growId,"onUpdate:modelValue":s[0]||(s[0]=e=>r.value.growId=e),type:"text",class:"mt-1 block w-full rounded-md"},null,8,["modelValue"]),(d=a.growId)!=null&&d.invalid?(m(),p(o(f),{key:0,severity:"error",size:"small",variant:"simple"},{default:u(()=>{var e;return[g(v((e=a.growId.error)==null?void 0:e.message),1)]}),_:2},1024)):y("",!0)]),t("div",U,[s[4]||(s[4]=t("label",{for:"password",class:"block text-sm font-medium text-surface-200"}," Password ",-1)),i(o(w),{id:"password",name:"password",modelValue:r.value.password,"onUpdate:modelValue":s[1]||(s[1]=e=>r.value.password=e),type:"password",class:"mt-1 block w-full rounded-md"},null,8,["modelValue"]),(b=a.password)!=null&&b.invalid?(m(),p(o(f),{key:0,severity:"error",size:"small",variant:"simple"},{default:u(()=>{var e;return[g(v((e=a.password.error)==null?void 0:e.message),1)]}),_:2},1024)):y("",!0)]),t("div",E,[s[5]||(s[5]=t("label",{for:"confirmPassword",class:"block text-sm font-medium text-surface-200"}," Confirm Password ",-1)),i(o(w),{id:"confirmPassword",name:"confirmPassword",modelValue:r.value.confirmPassword,"onUpdate:modelValue":s[2]||(s[2]=e=>r.value.confirmPassword=e),type:"password",class:"mt-1 block w-full rounded-md"},null,8,["modelValue"]),(x=a.confirmPassword)!=null&&x.invalid?(m(),p(o(f),{key:0,severity:"error",size:"small",variant:"simple"},{default:u(()=>{var e;return[g(v((e=a.confirmPassword.error)==null?void 0:e.message),1)]}),_:2},1024)):y("",!0)]),s[6]||(s[6]=t("div",{class:"flex justify-center"},[t("button",{type:"submit",class:"bg-primary-500 hover:bg-primary-600 text-white font-bold py-2 px-4 w-full rounded-md"}," Register ")],-1))])]}),_:1},8,["resolver","initialValues"])])])])],64))}});export{J as default};
