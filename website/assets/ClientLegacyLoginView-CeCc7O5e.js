import{z as u,p as _,s as D,a as w,b as f,c as j,d as z}from"./fetch-post-BHrvurFS.js";import"./index-DJKlbE3A.js";import{A as C,H as G,C as g,o as m,c as L,x as d,E as r,b as s,D as c,F as S,q as v,G as y,u as b,a as x}from"./index-Dw301Ny5.js";import"./index-DGEOgZpe.js";const h={class:"flex justify-center absolute top-1/2 left-1/2 mr-[-%50] -translate-x-1/2 -translate-y-1/2"},B={class:"w-[400px] h-auto bg-surface-800 rounded-md"},N={class:"flex justify-center flex-row"},F={class:"p-4"},T={class:"mb-4"},E={class:"mb-4"},A=C({__name:"ClientLegacyLoginView",setup(P){const n=G(),V=u.object({growId:u.string().min(5,{message:"GrowID must be at least 5 characters."}).max(20,{message:"GrowID are too long."}).refine(l=>!/[!@#$%^&*(),.?":{}|<> ]/.test(l),{message:"GrowID are containing special characters."}),password:u.string().min(5,{message:"Password must contains at least 5 characters long."})}),o=g({growId:"",password:""}),I=g(z(V)),k=async l=>{if(l.valid){const[e,a]=await _(o.value);if(a!==null){n.add({severity:"error",summary:a,life:2e3});return}else{const i=e==null?void 0:e.token;n.add({severity:"success",summary:"Successfully validated account!",life:2e3}),n.add({severity:"info",summary:"Redirecting to growtopia shortly...",life:3e3}),setTimeout(()=>{window.location.href=`/player/growid/login/validate?token=${i}`},3e3)}}};return(l,e)=>(m(),L(S,null,[d(r(D)),s("div",h,[s("div",B,[e[5]||(e[5]=s("div",{class:"text-center mt-8 mb-4"},[s("div",{class:"font-bold text-2xl"},"Legacy Login")],-1)),s("div",N,[d(r(j),{resolver:I.value,initialValues:o.value,onSubmit:k,class:"w-full px-8"},{default:c(a=>{var i,p;return[s("div",F,[s("div",T,[e[2]||(e[2]=s("label",{for:"growId",class:"block text-sm font-medium text-surface-200"}," GrowID ",-1)),d(r(w),{id:"growId",name:"growId",modelValue:o.value.growId,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.growId=t),type:"text",class:"mt-1 block w-full rounded-md"},null,8,["modelValue"]),(i=a.growId)!=null&&i.invalid?(m(),v(r(f),{key:0,severity:"error",size:"small",variant:"simple"},{default:c(()=>{var t;return[y(b((t=a.growId.error)==null?void 0:t.message),1)]}),_:2},1024)):x("",!0)]),s("div",E,[e[3]||(e[3]=s("label",{for:"password",class:"block text-sm font-medium text-surface-200"}," Password ",-1)),d(r(w),{id:"password",name:"password",modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.password=t),type:"password",class:"mt-1 block w-full rounded-md"},null,8,["modelValue"]),(p=a.password)!=null&&p.invalid?(m(),v(r(f),{key:0,severity:"error",size:"small",variant:"simple"},{default:c(()=>{var t;return[y(b((t=a.password.error)==null?void 0:t.message),1)]}),_:2},1024)):x("",!0)]),e[4]||(e[4]=s("div",{class:"flex justify-center"},[s("button",{type:"submit",class:"bg-primary-500 hover:bg-primary-600 text-white font-bold py-2 px-4 w-full rounded-md"}," Login ")],-1))])]}),_:1},8,["resolver","initialValues"])])])])],64))}});export{A as default};
